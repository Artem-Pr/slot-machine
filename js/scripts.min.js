"use strict";window.onload=function(){var l=document.querySelector(".balance"),e=document.querySelector(".btn-start"),r=document.querySelectorAll("select"),n=document.querySelectorAll("input[type='radio']"),c={BAR:"kit1","2xBAR":"kit1","3xBAR":"kit1",7:"kit2",CHERRY:"kit2"},o={CHERRY_0:2e3,CHERRY_1:1e3,CHERRY_2:4e3,"7_0":150,"7_1":150,"7_2":150,kit2_0:75,kit2_1:75,kit2_2:75,"3xBAR_0":50,"3xBAR_1":50,"3xBAR_2":50,"2xBAR_0":20,"2xBAR_1":20,"2xBAR_2":20,BAR_0:10,BAR_1:10,BAR_2:10,kit1_0:5,kit1_1:5,kit1_2:5},i=[],a=!0,u=null,s=null,d=reelItem({reelSelector:".reel__1",reelSpeed:4,spinTime:2,spinDelay:0}),m=reelItem({reelSelector:".reel__2",reelSpeed:5,spinTime:2,spinDelay:.5}),v=reelItem({reelSelector:".reel__3",reelSpeed:6,spinTime:2,spinDelay:1});function f(e,t){return e?o[e+"_"+t]:0}function p(e){if(e){var t=document.querySelector(".p"+e);t.classList.add("blink-points"),setTimeout(function(){t.classList.remove("blink-points")},5e3)}}function y(a){return a[0].reduce(function(e,t,r){var n,l,o,i=0;return t===a[1][r]&&t===a[2][r]?p(i=f(t,r)):c[t]===c[a[1][r]]&&c[t]===c[a[2][r]]&&p(i=f(c[t],r)),0!==i&&(n=i,l=r,o=document.querySelector(".win-line"+(l+1)),1e3<=n?o.classList.add("active-red"):o.classList.add("active-yellow")),i+e},0)}function _(t){e.disabled=t,l.disabled=t,r.forEach(function(e){return e.disabled=t}),n.forEach(function(e){return e.disabled=t})}function S(e,t,r){var n=2<arguments.length&&void 0!==r?r:0;if("init"===e)return s=s||new Audio("../sounds/slot-payoff.wav"),void(u=u||new Audio("../sounds/wheel4.wav"));"play"===e&&t.play(),"stop"===e&&t.pause(),t.currentTime=n}S("init"),e.addEventListener("click",function(e){if(function(e){if(0<+e.value)return!0;var t=document.querySelector(".modal");return t.classList.add("active"),setTimeout(function(){t.classList.add("show")}),!1}(l)){a||S("play",u,2);var t=document.querySelector("#random").checked;--l.value,_(!0),i.push(d(t,".goal-row-right",".goal-symbol-right")),i.push(m(t,".goal-row-middle",".goal-symbol-middle")),i.push(v(t,".goal-row-left",".goal-symbol-left")),function(){for(var e=document.querySelectorAll(".win-line"),t=0;t<e.length;t++)e[t].classList.remove("active-red","active-yellow")}(),setTimeout(function(){a||S("stop",u);var e,t,r,n=y(i);1e3<=n&&(e=n,t=document.querySelector(".win-modal"),r=t.querySelector(".win-modal__score"),a||S("play",s),r.textContent=e,t.style.display="block",setTimeout(function(){t.style.display="none"},5e3)),function(t,e){if(e){var r,n=+t.value,l=n+e;e<1e3&&(r=1),1e3<=e&&e<=2500&&(r=4),2500<e&&(r=8);var o=setInterval(function(){for(var e=1;e<=r;e++){if(n===l)return t.value=n,void clearInterval(o);++n}t.value=n},10)}}(l,n),_(!(i=[]))},3e3)}}),document.getElementById("balance").onkeydown=function(e){return 5e3<+(e.target.value+e.key)?(e.preventDefault(),void(e.target.value=5e3)):!/^[\D]$/.test(e.key)},document.querySelector(".modal__close").addEventListener("click",function(){var e=document.querySelector(".modal");e.classList.remove("show"),setTimeout(function(){e.classList.remove("active")},300)}),document.querySelectorAll(".speaker").forEach(function(e){e.addEventListener("click",function(e){e.target.classList.remove("active"),a=a?(document.querySelector(".unmuted").classList.add("active"),!1):(document.querySelector(".muted").classList.add("active"),S("stop",u),S("stop",s),!0)})})};var reelItem=function(a){var c=document.querySelector(a.reelSelector),e=c.querySelector(".reel__wrapper"),u={top:20,center:30,bottom:40},s=c.querySelector(".reel__container"),d=["3xBAR","BAR","2xBAR","7","CHERRY"],m=f();function v(e){var t=document.createElement("div");return t.className="reel__wrapper",r(e,t),t}function r(e,r){e.forEach(function(e){var t=document.createElement("img");t.src="img/reel/"+e+".png",t.alt=e,t.className="reel__img",r.append(t)})}function f(){return 10*Math.ceil(10*Math.random())}function p(e,t){e.style.transform="translateY("+t+"%)"}function y(e,t,r){e.style.transition="transform "+(t+r)+"s cubic-bezier(.3,.13,.79,1.11)"}return r(d,e),s.append(v(d)),p(s,m),function(e,t,r){var n=document.querySelector(t).value,l=document.querySelector(r).value;s=c.querySelector(".reel__container"),1<c.childElementCount&&c.children[1].remove();var o=function(e){var t=document.createElement("div");t.className="reel__container";for(var r=1;r<=a.reelSpeed;r++){var n=v(e);t.prepend(n)}return p(t,m-100*a.reelSpeed),y(t,a.spinTime,a.spinDelay),t}(d);c.prepend(o),y(s,a.spinTime,a.spinDelay),m=function(e,t,r){if(e)return f();for(var n=u[t],l=d.length;r!==d[--l];)100<(n+=20)&&(n-=100);return n}(e,n,l);var i=100*a.reelSpeed+m;return setTimeout(function(){o.style.transform="translateY("+m+"%)",s.style.transform="translateY("+i+"%)"}),function(e){for(var t=[null,null,null],r=d.length-1,n=0,l=e-20*r;l<=40;)l===u.top&&(t[0]=d[n]),l===u.center&&(t[1]=d[n]),l===u.bottom&&(t[2]=d[n]),++n>r&&(n=0),l+=20;return t}(m)}};